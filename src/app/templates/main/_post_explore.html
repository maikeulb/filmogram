<div class="js-infinite-item">

</div>

  <div class="modal" id="modal_post{{post.id}}" data="{{post.id}}">
    <div class="modal-background"></div>
    <div class="modal-content">
    </div>
    <button class="modal-close is-large" aria-label="close"></button>
  </div>

{% block js %}
  <script>
    document.querySelector('#open-modal{{post.id}}').addEventListener('click', function(event) {
    event.preventDefault();
    id=$(this).data('id')
    var modal = document.querySelector('.modal');  // assuming you have only 1
    var html = document.querySelector('html');
    modal.classList.add('is-active');
    html.classList.add('is-clipped');
    $.ajax({
      url: "{{ url_for('main.details', id=post.id )}}",
       type: "GET",
       success: function (data) {
         $(".modal-content").html(data);
       },
       error: function(xhr, ajaxOptions, thrownError){
        alert('not_cool')  //what to do in success
       },
    });

    modal.querySelector('.modal-background').addEventListener('click', function(e) {
      e.preventDefault();
      modal.classList.remove('is-active');
      html.classList.remove('is-clipped');
    });
  });
  </script>

  <script>
  $(document).ready(function () {
    $('#like-post[data-post-id="{{ post.id }}"]').submit(handleFormSubmit);

      function handleFormSubmit(evt) {
        postId = $(this).data('post-id');
        evt.preventDefault();
        addMessage(postId);
      }

      function addMessage() {
        $.ajax({
           url: "{{ url_for('api.like', id=post.id) }}",
           type: "GET",
           success: function (data) {
             $('#likes[data-post-id="{{ post.id }}"]').append(" " +data.data)
           },
           error: function(xhr, ajaxOptions, thrownError){
            alert('not_cool')  //what to do in success
           },
        });
      }
  });
  </script>

{% endblock %}
